<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <!-- Action Window for Recommended Properties -->
  <record id="action_real_estate_recommendedproperty" model="ir.actions.act_window">
    <field name="name">Recommended Properties</field>
    <field name="res_model">real_estate_recommendedproperty</field>
    <field name="view_mode">list,form</field>
    <field name="target">current</field>
  </record>

  <!-- List View for Recommended Properties -->
  <record id="view_real_estate_recommendedproperty_list" model="ir.ui.view">
    <field name="name">real.estate.recommendedproperty.list</field>
    <field name="model">real_estate_recommendedproperty</field>
    <field name="arch" type="xml">
      <list string="Recommended Properties">
        <field name="user_id"/>
        <field name="recommended_property_details_ids"/>
      </list>
    </field>
  </record>

  <!-- Form View for Recommended Properties -->
  <record id="view_real_estate_recommendedproperty_form" model="ir.ui.view">
    <field name="name">real.estate.recommendedproperty.form</field>
    <field name="model">real_estate_recommendedproperty</field>
    <field name="arch" type="xml">
      <form string="Recommended Property">
        <sheet>
          <group>
            <field name="user_id"/>
          </group>
          <notebook>
            <page string="Property Details">
              <field name="recommended_property_details_ids">
                <list editable="bottom">
                  <field name="property_id"/>
                  <field name="score"/>
                </list>
              </field>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <!-- Inherit Users Form View to add Recommended Properties -->
  <record id="view_users_form_inherit_recommended" model="ir.ui.view">
    <field name="name">users.users.form.inherit.recommended</field>
    <field name="model">users.users</field>
    <field name="inherit_id" ref="feedback_module.view_users_form"/>
    <field name="arch" type="xml">
      <xpath expr="//notebook" position="inside">
        <page string="Recommended Properties" name="recommended_properties">
          <field name="real_estate_recommendedproperty_ids">
            <list>
              <field name="recommended_property_details_ids">
                <list>
                  <field name="property_id"/>
                  <field name="score"/>
                </list>
              </field>
            </list>
          </field>
        </page>
      </xpath>
    </field>
  </record>

  <!-- Menu Items -->
  <menuitem id="menu_feedback_root" name="Feedback Management" sequence="20"/>
  <menuitem id="menu_feedback" name="Feedbacks" parent="menu_feedback_root" action="action_feedback" sequence="1"/>
  
  <!-- Move Recommended Properties to be beside Feedback -->
  <menuitem id="menu_real_estate_recommendedproperty" 
            name="Recommended Properties"
            parent="menu_feedback_root"
            action="action_real_estate_recommendedproperty" 
            sequence="2"/>
</odoo>
